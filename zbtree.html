<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>树形控件zbTree</title>
	<link href="zbTree.css" rel="Stylesheet" type="text/css" />
	<script src="zbTree.js" type="text/javascript"></script>
</head>
<body>

	<table>
	<tr>
		<td style=" vertical-align:top;">
			<div id="tree1" class="zbTree" style="width: 350px; overflow-y: auto;">
				超文本示例树
			</div>&nbsp;
		</td>
		<td style=" vertical-align:top;">zbTree v0.88<br />
			创建树对象：<br />
			var mytree <br />
			=new zbTree(tag:&quot;au&quot;,divid:&quot;tree1&quot;,onTap: tapNode);<br /> 
			tag：树标识，divid：位置，onTap：节点回调函数，<br />
			chkbox：检选框，addon: 行附加调用函数<br />	
		节点数组：<pre>var nodes1 = [
	{ id: 1, pid: 0, name: "节点1", open:true },
	{ id: 11, pid: 1, name: "节点11" }
];</pre>
id:号，pid:父，name:题目，open:展开否，link:，dis:禁<br />
			顶根： id:0 , pid:-1，<br />
			如果没有顶根，则 pid:0 的节点作为多根<br />
		
		mytree.AddTree(nodes1);<br />
		其中 nodes1 表示要加入的节点序列<br />
		生成的chkbox，name=name+box<br />
		
		选中：<input id="nodeid" type="hidden" value="" />
		<input id="nodename" type="text" value="" /><br /><br />

		<input id="btn3" type="button" value="定位到" onclick="locate();" />
		<select id="locateid" >
			<option value="1">1</option>
			<option value="11">11</option>
			<option value="111">111</option>
			<option value="112">112</option>
			<option value="1121">1121</option>
			<option value="113">113</option>
			<option value="12">12</option>
			<option value="121">121</option>
			<option value="122">122</option>
			<option value="123">123</option>
			<option value="13">13</option>
			<option value="2">2</option>
			<option value="21">21</option>
			<option value="211">211</option>
			<option value="212">212</option>
			<option value="213">213</option>
			<option value="3">3</option>
			<option value="22">22</option>
			<option value="221">221</option>
			<option value="222">222</option>
			<option value="223">223</option>
			<option value="23">23</option>
			<option value="231">231</option>
			<option value="232">232</option>
			<option value="233">233</option>
			<option value="2331">2331</option>
			<option value="2332">2332</option>
		</select>
		<br />
		<br />
		<input id="btn4" type="button" value="禁用当前" onclick="disNodes();" />
		<input id="btn5" type="button" value="禁用分支" onclick="disSub();" />
		<input id="btn6" type="button" value="取消禁用" onclick="enableNodes();" />
		<input id="btn7" type="button" value="删除" onclick="delNode();" /><br />
		<input id="btn2" type="button" value="在当前节点添加子树nodes2" onclick="add2();" />
		</td>
	</tr>
	</table>

	<div>
		用浏览器检查元素，调试查看生成的树内元素。
	</div>


<script type="text/javascript">

	var nodes1 = [
		{ id: 1, pid: 0, name: "父节点1 - 展开", open: true, gr:"2" },
		{ id: 11, pid: 1, name: "父节点11 - 折叠" },
		{ id: 111, pid: 11, name: "叶子节点111" },
		{ id: 112, pid: 11, name: "叶子节点112" },
		{ id: 1121, pid: 112, name: "叶子节点1121" },
		{ id: 113, pid: 11, name: "叶子节点113" },
		{ id: 12, pid: 1, name: "父节点12 - 折叠" },
		{ id: 121, pid: 12, name: "叶子节点121" },
		{ id: 122, pid: 12, name: "叶子节点122" },
		{ id: 123, pid: 12, name: "叶子节点123" },
		{ id: 13, pid: 1, name: "父节点13 - 没有子节点" },
		{ id: 2, pid: 0, name: "父节点2 - 折叠" },
		{ id: 21, pid: 2, name: "父节点21 - 展开", open: true },
		{ id: 211, pid: 21, name: "叶子节点211" },
		{ id: 212, pid: 21, name: "叶子节点212" },
		{ id: 213, pid: 21, name: "叶子节点213" },
		{ id: 3, pid: 0, name: "父节点3 - 没有子节点" },
		{ id: 22, pid: 2, name: "父节点22 - 折叠" },
		{ id: 221, pid: 22, name: "叶子节点221" },
		{ id: 222, pid: 22, name: "叶子节点222" },
		{ id: 223, pid: 22, name: "叶子节点223" },
		{ id: 23, pid: 2, name: "父节点23 - 折叠" },
		{ id: 231, pid: 23, name: "叶子节点231" },
		{ id: 232, pid: 23, name: "叶子节点232" },
		{ id: 233, pid: 23, name: "叶子节点233",open: true },
		{ id: 2331, pid: 233, name: "叶子节点233" },
		{ id: 2332, pid: 233, name: "叶子节点233",dis:true }
	];
	nodes2 = [
		{ id: 5, pid: "0", name: "节点5 - 展开", open: true },
		{ id: 51, pid: 5, name: "节点51" },
		{ id: 511, pid: 51, name: "叶节点511" },
		{ id: 512, pid: 51, name: "节点512" },
		{ id: 5121, pid: 512, name: "叶节点5121" },
		{ id: 513, pid: 51, name: "叶子节点513" },
		{ id: 52, pid: 5, name: "节点52" },
		{ id: 521, pid: 52, name: "叶节点521" },
		{ id: 522, pid: 52, name: "节点522" },
		{ id: 53, pid: 5, name: "节点53" },
		{ id: 531, pid: 53, name: "节点531" },
		{ id: 5311, pid: 531, name: "节点5311" }
	];

	var mytree = new zbTree({ tag: "t1", divid: "tree1", chkbox:true, onTap: tapNode, addon: addon });
	mytree.addTree(nodes1);
	
	function tapNode(nodeid, nodename, isFather) {
		document.getElementById("nodeid").value = nodeid;
		document.getElementById("nodename").value = nodename;
		//alert(nodeid +","+ grade);
	}
	
	function add2() {
		id = document.getElementById("nodeid").value;
		mytree.addTree(nodes2, id);
	}

	function ShowHtml() {
		document.getElementById("TextArea1").value = document.getElementById("tree1").innerHTML;
	}

	function delNode() {
		var oneid = document.getElementById("nodeid").value;
		mytree.delSub(oneid);
		//alert(oneid);
	}

	function disNodes() {
		mytree.disOne();
	}
	
	function disSub(){
		mytree.disSub();
	}

	function enableNodes() {
		mytree.undis();
	}

	function locate() {
		var val = document.getElementById("locateid").value;
		mytree.locate(val);
	}

	function addon(nodeid, nodediv) {
		alert("附加内容，节点："+nodeid+"，附加域："+nodediv);

	}

</script>
</body>
</html>
